<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" 
        crossorigin="anonymous">
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div id="app" class="container">
    <form v-on:submit.prevent="handleSubmit">
      <div class="bg-info p-5 rounded m-5">
        <div class="h2 text-center">Learn Vue - Forms</div>
        <hr/>
        <div>
          <hr/>
          <ul>
            <li v-for="error in errorList" class="text-danger">{{error}}</li>
          </ul>
        </div>

        <div class="input-group mt-3">
          <span class="input-group-text">Email</span> 
          <input type="text" class="form-control" v-model.trim="formObj.email"/> 
        </div>

        <div class="input-group mt-3">
          <span class="input-group-text">Name</span> 
          <input type="text" class="form-control" v-model.trim="formObj.name" v-on:blur="validName()"/> 
        </div>
        <div v-if="!formObj.validName" class="text-danger">Name is required</div>

        <div class="input-group mt-3">
          <span class="input-group-text">Phone</span> 
          <input type="text" class="form-control" v-model="formObj.phone"/> 
        </div>

        <div class="input-group mt-3">
          <input type="checkbox" class="form-check-input" v-model="formObj.subscribe"> 
          <label class="form-check-label">
            &nbsp; Subscribe to newletter
          </label>
        </div>

        <div class="border p-1">
          <label class="form-check-label">Gender</label> <br/>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" v-model="formObj.gender" value="male" name="inputRadioOptions"> Male
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" v-model="formObj.gender" value="female" name="inputRadioOptions"> Female
          </div>
          <!--Or-->
          <br/>
          <hr/>
          <select id="gender" v-model="formObj.gender" class="form-select">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>

        <div class="input-group mb-3">
          <button type="submit" class="btn btn-secondary m-2 w-50">Submit</button>
        </div>
      </div>
    </form>
  </div> <!-- close #app -->

  <script>
    const { createApp, ref, reactive } = Vue;

    createApp({
      setup() {
        const formObj = reactive({  
          email: "",
          name: "",
          phone:"",
          subscribe:false,
          gender:"",
          validName:true
        });

        function validName(){
          formObj.validName = formObj.name.length !== 0;
        }

        const errorList = ref([]);

        function handleSubmit(){
          // reset errors
          errorList.value = [];

          if (formObj.name.length === 0){
            errorList.value.push("Name is required");
          }
          if (formObj.email === ""){
            errorList.value.push("Email is required");
          }
          if (!formObj.subscribe){
            errorList.value.push("Please subcribe to newsletter");
          }

          console.log(formObj);
          if (errorList.value.length === 0){
            alert("Form submitted succesfully");
          }
        }

        return {formObj, handleSubmit, validName, errorList};
      },
    }).mount("#app");
  </script>
</body>
</html>
